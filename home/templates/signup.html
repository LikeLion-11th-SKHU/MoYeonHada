{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/user.css' %}" />
{% endblock css %}


{% block content %}
<head>
    <style>
        body {
            background: #f1f1f1;
        }
    </style>
</head>


    <div class="container box">
        <div class="input-form mx-auto">
            <h4 class="mb-2">íšŒì›ê°€ì…</h4>
            <p style="font-size: medium;">ì£¼í™©ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ ì¹¸ì€ ëª¨ë‘ ì‘ì„±í•´ì•¼ íšŒì›ê°€ì…ì´ ê°€ëŠ¥í•´ìš” ğŸ˜†</p>
            <!--íšŒì›ê°€ì… í¼ ì‹œì‘-->
            <form method="POST" enctype="multipart/form-data" class="validation-form" novalidate>
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <label class = "mb-2" style="color:#FD6F22;">{{ form.username.label }}</label>
                        <input type="text" name="username" class="form-control" maxlength="200"
                            placeholder="ì•„ì´ë””" value="" required>
                        <div class="invalid-feedback">
                            ì‚¬ìš©í•˜ì‹¤ ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. <br> ë¡œê·¸ì¸ í•  ë•Œ ì‚¬ìš©ë¼ìš”.
                        </div>
                    </div>
                    <div class="col-md-6 mb-4" style="color:#FD6F22;">
                        <label class = "mb-2"> {{ form.nickname.label }}</label>
                        <input type="text" name="nickname" class="form-control custom-select" maxlength="200"
                            placeholder="ë³„ëª…" value="" required>
                        <div class="invalid-feedback">
                            ë³„ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. <br> ì•ìœ¼ë¡œ ë³„ëª…ìœ¼ë¡œ ì´ìš©í•´ìš”.
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <label class = "mb-2" style="color:#FD6F22;">{{ form.email.label }}</label>
                    <input type="email" name="email" class="form-control custom-select" maxlength="255"
                        placeholder="ì´ë©”ì¼" required>
                    <div class="invalid-feedback">
                        ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì´ë©”ì¼ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” ex) moyeonhada@example.com
                    </div>
                </div>

                <div class="mb-4">
                    <label class = "mb-2" style="color:#FD6F22;">{{ form.password1.label }}</label>
                    <input type="password" name="password1" class="form-control" id = "password1"
                        placeholder="ë¹„ë°€ë²ˆí˜¸" required>
                    <div class="invalid-feedback">
                        ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
                    </div>
                </div>

                <div class="mb-4">
                    <label class = "mb-2" style="color:#FD6F22;">{{ form.password2.label }}</label>
                    <input type="password" name="password2" class="form-control" id = "password2"
                        placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬í™•ì¸" required>
                    <div class="invalid-feedback">
                        ë¹„ë°€ë²ˆí˜¸ ì¬í™•ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
                    </div>
                </div>

                <div class="mb-4">
                    <label class = "mb-2" style="color:#FD6F22;">{{ form.phone_number.label }}</label>
                    <input type="text" name="phone_number" 
                    class="form-control" placeholder="ì „í™”ë²ˆí˜¸" maxlength="200" required>
                    <div class="invalid-feedback">
                        ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
                    </div>
                </div>

                <div class="row mb-2">
                    <label class = "mb-2">ì§€ì—­</label>
                    <div class="col-6 mb-4">
                        <select name="region_big" class = "form-control" >
                            <option value="ì„œìš¸" selected>ì„œìš¸</option>
                            <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
                            <option value="ê°•ì›ë„">ê°•ì›ë„</option>
                            <option value="ì¶©ì²­ë„">ì¶©ì²­ë„</option>
                            <option value="ì „ë¼ë„">ì „ë¼ë„</option>
                            <option value="ê²½ìƒë„">ê²½ìƒë„</option>
                            <option value="ì¸ì²œ">ì¸ì²œ</option>
                            <option value="ëŒ€ì „">ëŒ€ì „</option>
                            <option value="ê´‘ì£¼">ê´‘ì£¼</option>
                            <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                            <option value="ìš¸ì‚°">ìš¸ì‚°</option>
                            <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                            <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                        </select>
                    </div>
                    <div class="col-6 mb-4">
                        <input type="text" name="region_small" 
                        class="form-control" placeholder="ì‹œ / êµ¬" maxlength="20" default = " ">
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6 mb-4">
                        <label class = "mb-1">ê°€ì… ëª©ì </label>
                        <select name="status" class = "form-control" >
                            <option value="teacher">ì„ ìƒë‹˜ì…ë‹ˆë‹¤</option>
                            <option value="student" selected>ë°°ìš°ë¯¸ì…ë‹ˆë‹¤</option>
                        </select>
                        <div class="invalid-feedback">
                            ê°€ì… ëª©ì ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <label for="id_profile_image" class = "mb-1">í”„ë¡œí•„ ì‚¬ì§„</label>
                        <input type="file" name="profile_image" accept="image/*" class="form-control custom-select d-block w-100"
                            class="" placeholder="í”„ë¡œí•„ ì‚¬ì§„">
                        <div class="invalid-feedback">
                            í”„ë¡œí•„ ì‚¬ì§„ì„ ì„ íƒí•´ì£¼ì„¸ìš”
                        </div>
                    </div>
                </div>

                <hr class="mb-4"> <br>
                <button class="btn-lg btn-user" type="submit">íšŒì›ê°€ì…</button>
                <p class="mt-4 mb-4 text-muted">ì´ë¯¸ ê³„ì •ì´ ìˆë‹¤ë©´? <a style="color:#FD6F22;" href="{% url 'login' %}"> ë¡œê·¸ì¸</a>
                </p>
            </form>
            <!--íšŒì›ê°€ì… í¼ ë-->
        </div>
    </div>

    <script>
        window.addEventListener('load', () => {
            const forms = document.getElementsByClassName('validation-form');

            Array.prototype.filter.call(forms, (form) => {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }

                    form.classList.add('was-validated');
                }, false);
            });
        }, false);

        var password = document.getElementById("password1")
            , confirm_password = document.getElementById("password2");

        function validatePassword() {
            if (password.value != confirm_password.value) { // ë§Œì¼ ë‘ ì¸í’‹ í•„ë“œê°’ì´ ê°™ì§€ ì•Šì„ ê²½ìš°
                // setCustomValidityì˜ ê°’ì„ ì§€ì •í•´ ë¬´ì¡°ê±´ ê²½ê³  í‘œì‹œê°€ ë‚˜ê²Œ í•˜ê³ 
                confirm_password.setCustomValidity("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            }
            else { // ë§Œì¼ ë‘ ì¸í’‹ í•„ë“œê°’ì´ ê°™ì„ ê²½ìš°
                // ì˜¤ë¥˜ê°€ ì—†ìœ¼ë©´ ë©”ì‹œì§€ë¥¼ ë¹ˆ ë¬¸ìì—´ë¡œ ì„¤ì •í•´ì•¼í•œë‹¤. ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ë¹„ì–´ ìˆì§€ ì•Šì€ í•œ ì–‘ì‹ì€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í†µê³¼í•˜ì§€ ì•Šê³  ì œì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.
                // ë”°ë¼ì„œ ë¹ˆê°’ì„ ì£¼ì–´ submit ì²˜ë¦¬ë˜ê²Œ í•œë‹¤
                confirm_password.setCustomValidity('');
            }
        }

        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;
    </script>

{% endblock %}